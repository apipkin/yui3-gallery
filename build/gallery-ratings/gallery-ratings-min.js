YUI.add("gallery-ratings",function(C){var B=C.Lang;function A(D){A.superclass.constructor.apply(this,arguments);}A.NAME="ratings";A.ATTRS={rating:{value:0,validator:"_validateRating",broadcast:1},min:{value:0,readOnly:true},max:{value:5,readOnly:true},inline:{value:false},skin:{value:"default",validator:"_validateSkin"}};A.HTML_PARSER={rating:function(D){var E=parseFloat(D.get("innerHTML"),10);return B.isNumber(E)?E:0;}};A.LIST_TEMPLATE='<div class="{ratings_id}{ratings_inline}">'+'<a href="#" title="0 stars out of 5" class="yui3-zero-stars{ratings_small}">0</a>'+'<ul class="yui3-star-rating{ratings_small}">'+'<li class="yui3-current-rating" style="width:{ratings_width};">{ratings_string}</li>'+'<li><a href="#" title="1 star out of 5" class="yui3-one-star">1</a></li>'+'<li><a href="#" title="2 stars out of 5" class="yui3-two-stars">2</a></li>'+'<li><a href="#" title="3 stars out of 5" class="yui3-three-stars">3</a></li>'+'<li><a href="#" title="4 stars out of 5" class="yui3-four-stars">4</a></li>'+'<li><a href="#" title="5 stars out of 5" class="yui3-five-stars">5</a></li>'+"</ul></div>";C.extend(A,C.Widget,{initializer:function(){},destructor:function(){},renderUI:function(){this._renderList();},bindUI:function(){this.after("ratingChange",this._afterRatingChange);C.on("click",C.bind(this._onClick,this),this.get("boundingBox"));},syncUI:function(){this._uiSetRating(this.get("rating"));},_getWidth:function(){return Math.floor(this.get("rating")/this.get("max")*100)+"%";},_getRatingsString:function(){return"Currently "+this.get("rating")+"/"+this.get("max")+" Stars.";},_validateRating:function(D){if(!B.isNumber(D)){D=parseFloat(D);}return B.isNumber(D)&&D>=this.get("min")&&D<=this.get("max");},_validateSkin:function(D){return B.isString(D)&&(D==="default"||D==="small");},_renderList:function(){var D=this.get("contentBox");D.set("innerHTML","").appendChild(D.create(C.substitute(A.LIST_TEMPLATE,{ratings_id:"yui3-"+this.get("id")+"_ratings",ratings_inline:this.get("inline")?" yui3-inline-rating":"",ratings_small:this.get("skin")==="small"?" yui3-small-star":"",ratings_width:this._getWidth(),ratings_string:this._getRatingsString()})));},_onClick:function(E){var D=E.target;if(D.get("tagName")==="A"){E.halt();this.set("rating",parseFloat(D.get("innerHTML")));}},_afterRatingChange:function(D){this._uiSetRating(D.newVal);},_uiSetRating:function(E){var D=this.get("contentBox").one(".yui3-current-rating");if(D){D.setStyle("width",this._getWidth());D.set("innerHTML",this._getRatingsString());}}});C.Ratings=A;},"gallery-2010.04.14-19-47",{requires:["widget","substitute"]});