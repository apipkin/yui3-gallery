YUI.add("couch-db",function(c){var b="couch:error",d="couch:info",a="couch:fetchAll";c.namespace("Couch").DB=c.Base.create("couch-db",c.Couch.Base,[],{_uri:"",initializer:function(e){this.publish(d,{defaultFn:this._defInfoFn});this.publish(a,{defaultFn:this._defFecthAllFn});this.fetchInfo();},fetchInfo:function(){var g=this._getDataSource(true),e=this._uri,f={success:c.bind(function(h){this.fire(d,{response:c.JSON.parse(h.response.results[0].responseText)});},this),failure:c.bind(function(h){this.fire(b,{message:"An error occurred fetching the information for the databases: "+h.error.message});},this)};g.set("source",e);g.sendRequest({cfg:{headers:{"Content-Type":"application/json"},method:"GET"},callback:f});return g;},fetchAllDocuments:function(f){var h=this._getDataSource(true),e=this._uri+"_all_docs",g={success:c.bind(function(i){this.fire(a,{response:c.JSON.parse(i.response.results[0].responseText)});},this),failure:c.bind(function(i){this.fire(b,{message:"An error occurred fetching the information for the databases: "+i.error.message});},this)};h.set("source",e);h.sendRequest({cfg:{headers:{"Content-Type":"application/json"},method:"GET",data:f},callback:g});return h;},getDocument:function(e){return new c.Couch.Document({baseURI:this.get("baseURI"),databaseName:this.get("name"),id:e});},_baseURISetter:function(e){this._uri=e+"/"+this.get("name")+"/";return e;},_nameSetter:function(e){this._uri=this.get("baseURI")+"/"+e+"/";return e;},_defInfoFn:function(f){this._set("info",f.response);},_defFecthAllFn:function(f){this._set("documents",f.response);}},{ATTRS:{baseURI:{value:"",setter:"_baseURISetter"},name:{value:"",setter:"_nameSetter"},info:{readOnly:true},documents:{readOnly:true}}});},"@VERSION@",{requires:["couch-base","couch-document"]});