YUI.add("couch-connect",function(e){var c=e.Lang,b=c.isString,d="couch:error",f="couch:info",a="couch:fetchAll";e.namespace("Couch").Connect=e.Base.create("couch-base",e.Couch.Base,[],{initializer:function(){this.publish(f,{defaultFn:this._defInfoFn});this.publish(a,{defaultFn:this._defFecthAllFn});this.fetchInfo(true);},fetchInfo:function(g){var i=this._getDataSource(g),h={success:e.bind(function(j){this.fire(f,{response:e.JSON.parse(j.response.results[0].responseText)});},this),failure:e.bind(function(j){this.fire(d,{message:"An error occurred fetching the information: "+j.error.message});},this)};i.set("source",this.get("baseURI")+"/");i.sendRequest({callback:h});return i;},fetchAllDatabases:function(g){var i=this._getDataSource(g),h={success:e.bind(function(j){this.fire(a,{response:e.JSON.parse(j.response.results[0].responseText)});},this),failure:e.bind(function(j){this.fire(d,{message:"An error occurred fetching the list of databases: "+j.error.message});},this)};i.set("source",this.get("baseURI")+"/_all_dbs");i.sendRequest({callback:h});return i;},getDatabase:function(g){return(new e.Couch.DB({baseURI:this.get("baseURI"),name:g}));},replicate:function(i,j,g){if(!b(i)&&!b(j)){}var h=this._getDataSource(true);g=g||{};g.source=i;g.target=j;h.set("source",this.get("baseURI")+"/_replicate");h.sendRequest({cfg:{headers:{"Content-Type":"application/json"},method:"POST",data:g}});},_baseURISetter:function(i){var h=i.length,g=i.substring(h-1);if(g==="/"){i=i.substring(0,h-1);}return i;},_defFecthAllFn:function(g){this._set("databases",g.response);},_defInfoFn:function(g){this._set("info",g.response);}},{ATTRS:{baseURI:{setter:"_baseURISetter"},databases:{value:[],readOnly:true},info:{value:{},readOnly:true}}});},"@VERSION@",{requires:["couch-base","couch-db"]});